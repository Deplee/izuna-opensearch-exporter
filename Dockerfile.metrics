FROM node:18-alpine

WORKDIR /app

# Установим только необходимые пакеты
COPY package*.json ./
RUN npm install express@4.18.3 prom-client@15.1.0

# Копируем сервер метрик
COPY src/api/metricsServer.js ./metricsServer.js

EXPOSE 9090

CMD ["node", "metricsServer.js"]
